var ABTest=function(t){this._this=t,this.selectedText=t.get(0),this.data={},this.data.css={},this.data.setUser=""};ABTest.prototype.wrapContent=function(){try{if(window.ActiveXObject){var t=document.selection.createRange();return t.htmlText}var a=document.createElement("span");a.className="edited bg";var e=window.getSelection().getRangeAt(0);return e.surroundContents(a),a.innerHTML}catch(s){return window.ActiveXObject?document.selection.createRange():window.getSelection()}},ABTest.prototype.create_toolbox=function(t){"undefined"==typeof t&&(t="short");var a="";return a="extended"===t?'<ul class="abt-toolbox extended">':'<ul class="abt-toolbox">',a+='<li><a href="#" class="abt-he abt-h" target="_blank"><i class="icon-lifebuoy"></i></a></li>',a+="<li>",a+='<a href="#" class="abt-te abt-b"><i class="icon-bold"></i></a>',a+='<a href="#" class="abt-te abt-u"><i class="icon-underline"></i></a>',a+='<a href="#" class="abt-te abt-i"><i class="icon-italic"></i></a>',a+='<a href="#" class="abt-te abt-a"><i class="icon-font"></i></a>',a+="</li>",a+="<li>",a+='<a href="#" class="abt-al abt-j"><i class="icon-align-justify"></i></a>',a+='<a href="#" class="abt-al abt-l"><i class="icon-align-left"></i></a>',a+='<a href="#" class="abt-al abt-c"><i class="icon-align-center"></i></a>',a+='<a href="#" class="abt-al abt-r"><i class="icon-align-right"></i></a>',a+="</li>",a+='<li class="abt-li">',a+='<a href="#" class="abt-li abt-it"><i class="icon-text-width"></i></a>',a+='<a href="#" class="abt-li abt-il"><i class="icon-text-height"></i></a>',a+="</li>",a+="<li>",a+='<a href="#" class="abt-del"><i class="icon-trash"></i></a>',a+='<a href="#" class="abt-cl"><i class="icon-cancel"></i></a>',a+='<a href="#" class="abt-sv"><i class="icon-floppy"></i></a>',a+="</li>",a+="</ul>"},ABTest.prototype.changeStyle=function(i){eval("this.data"+i+"=!this.data"+i+";");var rtrn={};switch(i){case"b":rtrn.prop="font-weight",rtrn.val="bold",rtrn.css="fontWeight";break;case"u":rtrn.prop="text-decoration",rtrn.val="underline",rtrn.css="textDecoration";break;case"i":rtrn.prop="font-style",rtrn.val="italic",rtrn.css="fontStyle";break;case"j":rtrn.prop="text-align",rtrn.val="justify",rtrn.css="textAlign";break;case"r":rtrn.prop="text-align",rtrn.val="right",rtrn.css="textAlign";break;case"c":rtrn.prop="text-align",rtrn.val="center",rtrn.css="textAlign";break;case"l":rtrn.prop="text-align",rtrn.val="left",rtrn.css="textAlign"}eval("this.data"+i+";")?("textAlign"===rtrn.css?$(".edited").parent().css(rtrn.prop,rtrn.val):$(".edited").css(rtrn.prop,rtrn.val),this.data.css[rtrn.css]=rtrn.val):($(".edited").removeStyle(rtrn.prop),delete this.data.css[rtrn.css]),$(this).toggleClass("selected")},ABTest.prototype.toolboxOptions=function(){var t=this.data.css;for(var a in t)"fontWeight"===a&&"bold"===t[a]&&$(".abt-b").addClass("selected"),"textDecoration"===a&&"underline"===t[a]&&$(".abt-u").addClass("selected"),"fontStyle"===a&&"italic"===t[a]&&$(".abt-i").addClass("selected"),"textAlign"===a&&"justify"===t[a]&&$(".abt-j").addClass("selected"),"textAlign"===a&&"right"===t[a]&&$(".abt-r").addClass("selected"),"textAlign"===a&&"center"===t[a]&&$(".abt-c").addClass("selected"),"textAlign"===a&&"left"===t[a]&&$(".abt-l").addClass("selected")},ABTest.prototype.add_toolbox=function(){$(".abt-toolbox").remove(),$(".edited").addClass("bg")};